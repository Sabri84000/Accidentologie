<!DOCTYPE html>
<html>
<head>
<script>
function getOSMData() {
 var url = createOsmURL();
 fetch(url)
  .then(status)
  .then(json)
  .then(function(data) {
    var roadDetailsStr = findRoadDetails(data);
    document.getElementById("Montexte").innerHTML = roadDetailsStr;
  }).catch(function(error) {
    console.log('Request failed', error);
  });
}
function status(response) {
  if (response.status >= 200 && response.status < 300) {
    return Promise.resolve(response)
  } else {
    return Promise.reject(new Error(response.statusText))
  }
}
function json(response) {
  return response.json()
}
function createOsmURL(){
  var opQuery= buildOverpassQuery();
  var baseURL = "https://lz4.overpass-api.de/api/interpreter";
  var query = '?data=[out:json][timeout:15];(' + opQuery + ');out;';
  var finalURL = baseURL + query;
  return finalURL;
}

function buildOverpassQuery() {
	var lat = document.getElementById("lat").value;
  	var lon = document.getElementById("lon").value;
  	var qLQuery = "way(around:5," + lat + "," + lon + ")[\"highway\"!~\"path|track|cycleway|footway\"];(._;>;);";
    return qLQuery;
}

function findRoadDetails(data) {
	var elementsArray = data.elements;
	for (var i in elementsArray) {
		var element = elementsArray[i];
		if ( element.type == "way") {
			return element.tags.highway;
		}
	}
	return "pas de route trouv√©e";
}

</script>
</head>
<body>
<span>lat:</span><span><input type="text" id="lat" value="43.943144"/></span>
<span>lon:</span><span><input type="text" id="lon" value="4.811832"/></span>
<button  type="button" onclick="getOSMData()">Valider</button>
<p id ="Montexte"/>
</body>
</html>


<!DOCTYPE html>
<html>
<head>
	<title>Projet_accidentologie</title>
	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<style type="text/css">
		.rounded-circle.change-area {
		    height: 200px;
		    width: 200px;
		    background: green;
		}
	</style>
</head>
<body>
	<div class="container">
		<div class="row">
			<div class="col-md-6 left-pane">
				<div class="row">
					<input type="text" id="coefficient-value" name="" class="form-control" placeholder="Please Enter the value">
				</div>
				<div class="row">
					<button class=".btn-default" onclick="changecolor()" id="click-button">Click Here</button>
				</div>
			</div>
			<div class="col-md-6 right-pane">
				<div class="rounded-circle change-area"></div>
			</div>
		</div>
	</div>
<script
  src="https://code.jquery.com/jquery-3.4.0.min.js"
  integrity="sha256-BJeo0qm959uMBGb65z40ejJYGSgR7REI4+CW1fNKwOg="
  crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script type="text/javascript">
	function changecolor(){
		var cValue = $('#coefficient-value').val();
		if(cValue != ""){
			if(cValue <= 4){
				$('.change-area').css('background', 'green');
			}else if(cValue > 4 && cValue <=7){
				$('.change-area').css('background', 'blue');
			}
			else if(cValue > 7 && cValue <=10){
				$('.change-area').css('background', 'red');
			}
		}
	}
</script>
</body>
</html>
